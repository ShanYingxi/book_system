<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>å‘å¸ƒå›¾ä¹¦</title>
    <style>
        body { font-family: sans-serif; padding: 40px; max-width: 600px; margin: auto; }
        h2 { color: #333; }
        input, textarea, select, button {
            width: 100%;
            padding: 8px;
            margin-top: 10px;
            box-sizing: border-box;
        }
        .msg { margin-top: 20px; color: green; }
        .error { color: red; }
    </style>
</head>
<nav style="margin-bottom: 20px;">
    <a href="/">ğŸ“š å›¾ä¹¦åˆ—è¡¨</a> |
    <a href="/register">ğŸ“ æ³¨å†Œ</a> |
    <a href="/add_book">ğŸ“– å‘å¸ƒå›¾ä¹¦</a> |
    <a href="/orders">ğŸ“¦ æˆ‘çš„è®¢å•</a> |
    <a href="/book_types_view">ğŸ“‚ å›¾ä¹¦åˆ†ç±»</a> |
    <a href="/update_user">âš™ï¸ ä¿®æ”¹ç”¨æˆ·</a> |
    <a href="/delete_user">ğŸ—‘ï¸ åˆ é™¤ç”¨æˆ·</a>
  </nav>
  
<body>
    <h2>ğŸ“– å‘å¸ƒå›¾ä¹¦</h2>
    <form id="bookForm">
        <input type="text" name="title" placeholder="ä¹¦å" required />
        <input type="text" name="author" placeholder="ä½œè€…" />
        <input type="number" step="0.01" name="price" placeholder="ä»·æ ¼" required />
        <textarea name="description" placeholder="å›¾ä¹¦æè¿°"></textarea>
        <input type="number" name="seller_id" placeholder="å–å®¶ID" required />
        <input type="number" name="type_id" placeholder="åˆ†ç±»ID" required />
        <button type="submit">æäº¤å‘å¸ƒ</button>
    </form>
    <div class="msg" id="msg"></div>

    <script>
        const form = document.getElementById('bookForm');
        form.addEventListener('submit', async function (e) {
            e.preventDefault();
            const formData = new FormData(form);
            const jsonData = Object.fromEntries(formData.entries());

            const res = await fetch('/books', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(jsonData)
            });

            const result = await res.json();
            const msg = document.getElementById('msg');
            msg.textContent = result.message || result.error;
            msg.className = result.error ? 'error' : 'msg';
        });
    </script>
</body>
</html>
